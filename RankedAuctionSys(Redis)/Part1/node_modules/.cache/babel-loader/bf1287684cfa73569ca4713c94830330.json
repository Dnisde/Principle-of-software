{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dnisde/Desktop/Boston University/EC500/hw1/Problem1/EC500/hw1/P1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dnisde/Desktop/Boston University/EC500/hw1/Problem1/EC500/hw1/P1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{Form,Input,message,InputNumber}from'antd';import axios from'axios';import PubSub from\"pubsub-js\";import MD5 from\"./md5_lib\";import{REDIS_URL}from\"../constants\";import{PASSWORD}from'../constants';import{SALT}from'../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InputBox(){var md5=new MD5(SALT+PASSWORD);var hash=md5.md5;var UpdateSum=function UpdateSum(){var g0=document.getElementById(\"git0\");var g1=document.getElementById(\"git1\");var g2=document.getElementById(\"git2\");var g3=document.getElementById(\"git3\");var g4=document.getElementById(\"git4\");var sum=parseInt(g0.value)+parseInt(g1.value)+parseInt(g2.value)+parseInt(g3.value)+parseInt(g4.value);document.getElementById(\"sum\").value=sum;var submitbtn=document.getElementById(\"submit-btn\");if(sum>100||sum<0){submitbtn.disabled=true;message.error(\"Total score must be smaller than 100!\");}else{submitbtn.disabled=false;}};var Submit=function Submit(){var name=document.getElementById(\"wiki-name\");var command='HMSET user:'+name.value;for(var i=0;i<5;i++){var score=document.getElementById(\"git\"+i).value;console.log(score);command+=' git'+i+' '+score;}console.log(command);var opt={method:'GET',url:REDIS_URL+'?salt='+SALT+'&hash='+hash+'&message='+command,headers:{'content-type':'application/json'}};axios(opt).then(function(response){console.log('Request sent to Redis: ',opt);console.log(response.data);if(response.status===200){if(!response.data||response.data.length===0){message.error('Submit Fail');}else{message.success('Submit Succeed');}}}).catch(function(error){console.log(error.message);message.error('Submit Fail');});};var ViewData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var name,flag,sum,_loop,i,command;return _regeneratorRuntime().wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:name=document.getElementById(\"wiki-name\");flag=0;sum=0;_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(){var opt,score;return _regeneratorRuntime().wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:command='HGET user:'+name.value+' git'+i;opt={method:'GET',url:REDIS_URL+'?salt='+SALT+'&hash='+hash+'&message='+command,headers:{'content-type':'application/json'}};score=void 0;_context.next=5;return axios(opt).then(function(response){console.log('Request sent to Redis: ',opt);score=response.data.toLocaleString().slice(-2);if(response.status===200){if(response.data&&response.data.length!==0){flag++;}}}).catch(function(error){console.log(error.message);message.error('View Request Fail');});case 5:console.log(score);document.getElementById(\"git\"+i).value=score;sum+=parseInt(score);case 8:case\"end\":return _context.stop();}}},_loop);});i=0;case 5:if(!(i<5)){_context2.next=10;break;}return _context2.delegateYield(_loop(),\"t0\",7);case 7:i++;_context2.next=5;break;case 10:if(flag==5){message.success(\"View Request Succeed\");document.getElementById(\"sum\").value=sum;}else{message.error(\"View Request Fail\");}case 11:case\"end\":return _context2.stop();}}},_callee);}));return function ViewData(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Input Wikiname\",id:\"wiki-name\",className:\"wiki-name\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InputNumber// min={0}\n// max={100}\n,{defaultValue:0,readOnly:true,addonBefore:\"Sum\",id:\"sum\",className:\"sum\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:99,defaultValue:0,controls:false,addonBefore:\"Git0\",id:\"git0\",onChange:UpdateSum,className:\"rank-table\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:99,defaultValue:0,controls:false,addonBefore:\"Git1\",id:\"git1\",onChange:UpdateSum,className:\"rank-table\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:99,defaultValue:0,controls:false,addonBefore:\"Git2\",id:\"git2\",onChange:UpdateSum,className:\"rank-table\",label:\"123\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:99,defaultValue:0,controls:false,addonBefore:\"Git3\",id:\"git3\",onChange:UpdateSum,className:\"rank-table\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:99,defaultValue:0,controls:false,addonBefore:\"Git4\",id:\"git4\",onChange:UpdateSum,className:\"rank-table\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:Submit,id:\"submit-btn\",className:\"submit-btn\",children:\"Submit\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:ViewData,className:\"view-btn\",children:\"View\"})})]});}export default InputBox;","map":{"version":3,"names":["React","Form","Input","message","InputNumber","axios","PubSub","MD5","REDIS_URL","PASSWORD","SALT","InputBox","md5","hash","UpdateSum","g0","document","getElementById","g1","g2","g3","g4","sum","parseInt","value","submitbtn","disabled","error","Submit","name","command","i","score","console","log","opt","method","url","headers","then","response","data","status","length","success","catch","ViewData","flag","toLocaleString","slice"],"sources":["/Users/dnisde/Desktop/Boston University/EC500/hw1/Problem1/EC500/hw1/P1/src/components/InputBox.js"],"sourcesContent":["import React from \"react\";\nimport { Form, Input, message, InputNumber } from 'antd';\nimport axios from 'axios';\nimport PubSub from \"pubsub-js\"\nimport MD5 from \"./md5_lib\"\nimport { REDIS_URL } from \"../constants\";\nimport { PASSWORD } from '../constants';\nimport { SALT } from '../constants';\n\nfunction InputBox() {\n    var md5 = new MD5(SALT + PASSWORD);\n    const hash = md5.md5;\n\n    const UpdateSum = () => {\n        var g0 = document.getElementById(\"git0\");\n        var g1 = document.getElementById(\"git1\");\n        var g2 = document.getElementById(\"git2\");\n        var g3 = document.getElementById(\"git3\");\n        var g4 = document.getElementById(\"git4\");\n        var sum = parseInt(g0.value) + parseInt(g1.value) + parseInt(g2.value) + parseInt(g3.value) + parseInt(g4.value)\n        document.getElementById(\"sum\").value = sum;\n        var submitbtn = document.getElementById(\"submit-btn\");\n        if (sum > 100 || sum < 0) {\n            submitbtn.disabled = true;\n            message.error(\"Total score must be smaller than 100!\")\n        } else {\n            submitbtn.disabled = false;\n        }\n    }\n\n    const Submit = () => {\n        var name = document.getElementById(\"wiki-name\");\n        var command = 'HMSET user:' + name.value;\n        for (var i = 0; i < 5; i++) {\n            var score = document.getElementById(\"git\" + i).value;\n            console.log(score);\n            command += ' git' + i + ' ' + score;\n        }\n        console.log(command)\n\n        const opt = {\n            method: 'GET',\n            url: REDIS_URL + '?salt=' + SALT + '&hash=' + hash + '&message=' + command,\n            headers: { 'content-type': 'application/json'}\n        };\n\n        axios(opt)\n            .then( response => {\n                console.log('Request sent to Redis: ', opt)\n                console.log(response.data)\n                if(response.status === 200) {\n                    if (!response.data || response.data.length === 0) {\n                        message.error('Submit Fail');\n                    }\n                    else {\n                        message.success('Submit Succeed');\n                    }\n\n                }\n            })\n            .catch( error => {\n                console.log(error.message);\n                message.error('Submit Fail');\n            })\n    }\n\n    const ViewData = async() => {\n        var name = document.getElementById(\"wiki-name\");\n        let flag = 0;\n        let sum = 0;\n        for (var i = 0; i < 5; i++) {\n            var command = 'HGET user:' + name.value + ' git' + i;\n            const opt = {\n                method: 'GET',\n                url: REDIS_URL + '?salt=' + SALT + '&hash=' + hash + '&message=' + command,\n                headers: { 'content-type': 'application/json'}\n            };\n            let score;\n            await axios(opt)\n                .then( response => {\n                    console.log('Request sent to Redis: ', opt)\n                    score = response.data.toLocaleString().slice(-2)\n                    if(response.status === 200) {\n                        if (response.data && response.data.length !== 0) {\n                            flag++;\n                        }\n                    }\n                })\n                .catch( error => {\n                    console.log(error.message);\n                    message.error('View Request Fail');\n                })\n            console.log(score)\n            document.getElementById(\"git\" + i).value = score;\n            sum += parseInt(score);\n        }\n        if (flag == 5) {\n            message.success(\"View Request Succeed\")\n            document.getElementById(\"sum\").value = sum;\n        }\n        else {\n            message.error(\"View Request Fail\")\n        }\n    }\n\n    return (\n        <div>\n            <div>\n                <input\n                    type=\"text\"\n                    placeholder=\"Input Wikiname\"\n                    id=\"wiki-name\"\n                    className=\"wiki-name\"\n                />\n            </div>\n            <div>\n                <InputNumber\n                    // min={0}\n                    // max={100}\n                    defaultValue={0}\n                    readOnly={true}\n                    addonBefore=\"Sum\"\n                    id=\"sum\"\n                    className=\"sum\"\n                />\n            </div>\n            <div>\n                <InputNumber\n                    min={0}\n                    max={99}\n                    defaultValue={0}\n                    controls={false}\n                    addonBefore=\"Git0\"\n                    id=\"git0\"\n                    onChange={UpdateSum}\n                    className=\"rank-table\"\n                />\n            </div>\n            <div>\n                <InputNumber\n                    min={0}\n                    max={99}\n                    defaultValue={0}\n                    controls={false}\n                    addonBefore=\"Git1\"\n                    id=\"git1\"\n                    onChange={UpdateSum}\n                    className=\"rank-table\"\n                />\n            </div>\n            <div>\n                <InputNumber\n                    min={0}\n                    max={99}\n                    defaultValue={0}\n                    controls={false}\n                    addonBefore=\"Git2\"\n                    id=\"git2\"\n                    onChange={UpdateSum}\n                    className=\"rank-table\"\n                    label=\"123\"\n                />\n            </div>\n            <div>\n                <InputNumber\n                    min={0}\n                    max={99}\n                    defaultValue={0}\n                    controls={false}\n                    addonBefore=\"Git3\"\n                    id=\"git3\"\n                    onChange={UpdateSum}\n                    className=\"rank-table\"\n                />\n            </div>\n            <div>\n                <InputNumber\n                    min={0}\n                    max={99}\n                    defaultValue={0}\n                    controls={false}\n                    addonBefore=\"Git4\"\n                    id=\"git4\"\n                    onChange={UpdateSum}\n                    className=\"rank-table\"\n                />\n            </div>\n            <div>\n                <button\n                    onClick={Submit}\n                    id=\"submit-btn\"\n                    className=\"submit-btn\">\n                    Submit\n                </button>\n            </div>\n            <div>\n                <button\n                    onClick={ViewData}\n                    className=\"view-btn\">\n                    View\n                </button>\n            </div>\n\n        </div>\n    );\n}\n\nexport default InputBox;"],"mappings":"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"},"metadata":{},"sourceType":"module"}